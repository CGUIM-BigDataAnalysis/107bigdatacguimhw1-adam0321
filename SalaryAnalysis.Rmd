---
title: "107-2 大數據分析方法 作業一"
output: github_document
author: 蔡忠諺
---

搞不清楚各行各業的薪資差異嗎? 念研究所到底對第一份工作的薪資影響有多大? CP值高嗎? 透過分析**初任人員平均經常性薪資**- [開放資料連結](https://data.gov.tw/dataset/6647)，可初步了解台灣近幾年各行各業、各學歷的起薪。

## 比較103年度和106年度大學畢業者的薪資資料

### 資料匯入與處理
```{r dataload}
#fromjson()
#inner_join()
library(dplyr)
library(readr)
#將103年資料匯入
X103teach <- read_csv("C:/Users/USER/Desktop/103teach.csv",
                      locale = locale(encoding = "BIG5"))
#將104年資料匯入
X104teach <- read_csv("C:/Users/USER/Desktop/104teach.csv",
                      locale = locale(encoding = "BIG5"))
#將105年資料匯入
X105teach <- read_csv("C:/Users/USER/Desktop/105teach.csv",
                      locale = locale(encoding = "BIG5"))
#將106年資料匯入
X106teach <- read_csv("C:/Users/USER/Desktop/106teach.csv",
                      locale = locale(encoding = "BIG5"))

```

### 106年度薪資較103年度薪資高的職業有哪些? 
```{r compare103106}
#這是R Code Chunk
#將103和106做合併，並叫job
job <- merge(X103teach, X106teach, by = "大職業別")
#將106年的大學畢業薪資除以103大學畢業薪資，並存入job$jobrate欄位
job$jobrate <- c(job$`大學-薪資.y` / job$`大學-薪資.x`)
#用jobrate將job做大到小的篩選
job <- arrange(job,
               desc(jobrate))
#將jobratejob>1在存入job1中
job1 <- subset(job, job$jobrate > 1)
#將job1顯示出來
knitr::kable(job1)
```

### 提高超過5%的的職業有哪些? 
```{r over5}
#這是R Code Chunk
#將jobratejob>1.05在存入job2中
job2 <- subset(job, job$jobrate > 1.05)
#將job2顯示出來
knitr::kable(job2)
```

### 主要的職業種別是哪些種類呢?
```{r mainType}
#這是R Code Chunk
#將'大職業別'裡的"-"分開並儲存在str1
str1 <- strsplit(job2$'大職業別', "-")
#用dataframe將分開後的資串存入dtstr
dtstr <- data.frame(index = c(1:length(str1)))
#改變dtstr裡row並取出第一個的資料名稱
for (i in 1:length(str1)) {
  dtstr[i, 1] <- str1[[i]][1]
}
#大職業別的個數
knitr::kable(dtstr)
```

## 男女同工不同酬現況分析

男女同工不同酬一直是性別平等中很重要的問題，分析資料來源為103到106年度的大學畢業薪資。

### 103到106年度的大學畢業薪資資料，哪些行業男生薪資比女生薪資多?

有資料可知，103年礦業及土石採取業大學畢業生男女差距最多者，但到了105後就消失在前10名中，103年藝術、娛樂及休閒服務業和105年不動產業、資訊及通訊傳播業，男女差距都有進入前10名中，但都在隔年消失於前10名中，但其他服務業、教育服務業、營造業、電力及燃氣供應業都一直維持在前10名內，且技藝_機械設備操作及組裝人員一職維持於10名內。

```{r male}
#這是R Code Chunk
#顯示103年10筆大學-女/男由小到大且小於100的資料
x103boy <- arrange(X103teach, `大學-女/男`) %>%
  subset(`大學-女/男` < 100) %>%
  head(10)
knitr::kable(x103boy)
#顯示104年10筆大學-女/男由小到大且小於100的資料
x104boy <- arrange(X104teach,
                   `大學-女/男`) %>%
  subset(`大學-女/男` < 100) %>%
  head(10)
knitr::kable(x104boy)
#顯示105年10筆大學-女/男由小到大且小於100的資料
x105boy <- arrange(X105teach,
                   `大學-女/男`) %>%
  subset(`大學-女/男` < 100) %>%
  head(10)
knitr::kable(x105boy)
#顯示106年10筆大學-女/男由小到大且小於100的資料
x106boy <- arrange(X106teach,
                   `大學-女/男`) %>%
  subset(`大學-女/男` < 100) %>%
  head(10)
knitr::kable(x106boy)
```
### 哪些行業女生薪資比男生薪資多? 

103年時，所有職業女生大學畢業生薪水皆少於或等於男生畢業生薪水，104年時，專業、科學及技術服務業-技藝、機械設備操作及組裝人員的薪水比男生還高， 105年時，金融及保險業-專業人員比男生的薪水高，106年時，資訊及通訊傳播業-服務及銷售工作人員的薪水比男生還要高，有此可知，資訊及通訊傳播業的男女薪水逐漸平等，且高於男生。

```{r female}
#這是R Code Chunk
#顯示103年10筆大學-女/男由大到小且大於100的資料
x103girl <- arrange(X103teach,
                    desc(`大學-女/男`)) %>%
  subset(`大學-女/男` > 100) %>%
  head(10)
knitr::kable(x103girl)
#顯示104年10筆大學-女/男由大到小且大於100的資料
X104girl <- arrange(X104teach,
                    desc(`大學-女/男`)) %>%
  subset(`大學-女/男` > 100) %>%
  head(10)
knitr::kable(X104girl)
#顯示105年10筆大學-女/男由大到小且大於100的資料
X105girl <- arrange(X105teach,
                    desc(`大學-女/男`)) %>%
  subset(`大學-女/男` > 100) %>%
  head(10)
  knitr::kable(X105girl)
#顯示106年10筆大學-女/男由大到小且大於100的資料
X106girl <- arrange(X106teach,
                    desc(`大學-女/男`)) %>%
  subset(`大學-女/男` > 100) %>%
  head(10)
knitr::kable(X106girl)
```

## 研究所薪資差異

以106年度的資料來看，哪個職業別念研究所最划算呢 (研究所學歷薪資與大學學歷薪資增加比例最多)?
經過比對後可看出礦業及土石採取業-事務支援人員、專業_科學及技術服務業、其他服務業-技術員及助理專業人員、專業_科學及技術服務業-事務支援人員、批發及零售業、製造業、藝術_娛樂及休閒服務業-事務支援人員、工業部門、工業及服務業部門、服務業部門念研究所最划算，可因此獲得較高的薪資。
 
```{r grad}
#取出106年`大職業別`、`大學-薪資`、`研究所及以上-薪資`的資料存入salary
salary <- select(X106teach, `大職業別`, `大學-薪資`, `研究所及以上-薪資`)
#計算`研究所及以上-薪資`除以`大學-薪資`並加入rate的欄位中
salary$rate <- (X106teach$`研究所及以上-薪資` / X106teach$`大學-薪資`)
#顯示106年10筆rate資料由大到小的取出
knitr::kable(head(arrange(salary,
             desc(salary$rate)), 10))

```

## 我有興趣的職業別薪資狀況分析

1.工業及服務業部門-專業人員、工業部門-專業人員、資訊及通訊傳播業-專業人員、資訊及通訊傳播業、工業及服務業部門，這5個職業別是我有興趣的。
2.工業及服務業部門-專業人員大學薪資32108元、研究所薪資36778元，工業部門-專業人員大學薪資31775元、研究所薪資36640元，資訊及通訊傳播業-專業人員大學薪資31817元、研究所薪資36545元，資訊及通訊傳播業大學薪資29198元、研究所薪資33944元，工業及服務業部門大學薪資28446元、研究所薪資33633元。
3.我認為和我想像中的差不多，大學和研究所畢業大約月薪可以相差4000元以上，就算只有大學薪水也超過28000元，研究所都能達到33000以上。
4.工業及服務業部門大學和研究所相差5187元，資訊及通訊傳播業大學和研究所相差4746元，資訊及通訊傳播業-專業人員大學和研究所相差4728元，工業部門-專業人員大學和研究所相差4865元，工業及服務業部門-專業人員大學和研究所相差4670元。
5.我仍會繼續選擇念研究所，就單純畢業薪資來看都有差大約4000元，以升遷的角度來說，大學也可能會相對不容易。

### 有興趣的職業別篩選，呈現薪資
```{r like}
#這是R Code Chunk
#篩選"資訊|工業"相關的大職業別，並將T、F加入want的欄位中
salary$want <- grepl("資訊|工業", salary$`大職業別`)
#取出為TRUE的大職業別寫入jobwant中
jobwant <- (salary[salary$want, ])
#從jobwant取出研究所薪資較多的前5個存入salarywant
salarywant <- head(arrange(jobwant,
                           desc(`研究所及以上-薪資`)), 5)
#顯示salarywant
knitr::kable(salarywant)
```

### 這些職業別研究所薪資與大學薪資差多少呢？
```{r likeGrad}
#這是R Code Chunk
#計算`研究所及以上-薪資`-`大學-薪資`並新增change欄位於salarywant中
salarywant$change <- (salarywant$`研究所及以上-薪資` - salarywant$`大學-薪資`)
#顯示salalrywant
knitr::kable(salarywant)
```

